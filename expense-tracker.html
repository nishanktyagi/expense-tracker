<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Expense Tracker</title>
    <style>
      body {
        background-color: #0f0f16;
        display: flex;
        align-items: center;
        height: 100vh;
        justify-content: center;
      }
      .card-container {
        background-color: #1a1a27;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 50px 30px;
        border: 1px solid #fff;
        border-radius: 25px;
        width: max-content;
      }
      .item {
        display: flex;
        flex-direction: column;
      }
      h1,
      h2 {
        color: #fff;
        text-align: center;
        margin-bottom: 20px;
        font-size: 24px;
      }
      ::placeholder {
        color: #fff;
      }
      input,
      button {
        min-width: 300px;
        padding: 10px;
        background-color: #9b5cff;
        color: #fff;
        border-radius: 5px;
        margin-bottom: 20px;
      }
      button {
        background: #9b5cff;
      }
    </style>
  </head>
  <body>
    <div class="card-container">
      <h1>Expense Tracker</h1>
      <div>
        <form action="" class="item">
          <input type="text" name="Amout" placeholder="Amout" id="amount" required/>
          <input
            type="text"
            name="Description"
            placeholder="Description"
            id="description"
            required
          />
          <button onclick="getExpense()">Add Expense</button>
        </form>
      </div>

      <ul
        id="expenseListContainer"
        style="margin-bottom: 0px; padding-left: 10px; width: 100%"
      ></ul>
    </div>
  </body>
  <script>
    let expenses = JSON.parse(localStorage.getItem("expenses")) || [];

    let expenseListContainer = document.getElementById("expenseListContainer");
    const mainWrapper = document.getElementsByClassName("card-container")[0];

    // Heading
    const createExpenseHeading = document.createElement("h2");
    createExpenseHeading.style.width = "100%";
    createExpenseHeading.style.textAlign = "left";
    createExpenseHeading.style.color = "#fff";
    createExpenseHeading.innerText = "Expense List";
    mainWrapper.insertBefore(createExpenseHeading, expenseListContainer);

    // Total Expense Heading
    let totalExpenseDiv = document.createElement("h2");
    totalExpenseDiv.id = "totalExpense";
    mainWrapper.appendChild(totalExpenseDiv);

    function getExpense() {
      let amount = document.getElementById("amount").value;
      let description = document.getElementById("description").value;

      let expense = {
        amount: Number(amount),
        description: description,
      };
      if (amount === ""  || description == "")  return;

      expenses.push(expense);
      localStorage.setItem("expenses", JSON.stringify(expenses));

      document.getElementById("amount").value = "";
      document.getElementById("description").value = "";

      renderExpense();
    }

    function renderExpense() {
      expenseListContainer.innerHTML = "";

      expenses.forEach((expense, index) => {
        expenseListContainer.innerHTML += `
        <li style="display:flex; justify-content:space-between; color:#fff; margin-bottom:10px;">
          <span>Rs ${expense.amount} - ${expense.description}</span>
          <span class="closeBtn" onclick="deleteExpense(${index})" style="cursor: pointer; font-size: 22px;">&#215;</span>
        </li>
      `;
      });

      totalExpense();
    }

    function totalExpense() {
      let total = expenses.reduce((acc, cur) => acc + cur.amount, 0);
      totalExpenseDiv.innerText = `Total Expense : ${total}`;
    }

    function deleteExpense(index) {
      expenses.splice(index, 1);
      localStorage.setItem("expenses", JSON.stringify(expenses));
      renderExpense();
    }

    // FIX 2: Call renderExpense() on page load
    renderExpense();
  </script>
</html>
